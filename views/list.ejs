<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alms-Deed (Aahaar)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div id="main">
        <a href="#nav">
            <div id="mvtop">
                <ion-icon name="chevron-up-outline"></ion-icon>
            </div>
        </a>
        <div id="nav">
            <div id="left">
                <div id="icon">
                    <img src="/images/Alms-deed-3.jpeg" alt="">
                </div>
            </div>
            <div id="ctr">
                <a id="" href="#notifs">
                    <h3>HOME</h3>
                </a>
                <a href="#our-mission">
                    <h3>OUR MISSION</h3>
                </a>
                <!-- <a href="#org">
                    <h3>LISTED NGOs</h3>
                </a>
                <a href="#notify">
                    <h3>NOTIFY</h3>
                </a> -->
            </div>
            <div id="rt">
                <div id="logSign">
                    <h3>LOGIN / SIGNUP</h3>
                </div>
            </div>
        </div>
        <div class="logScreen same">
            <div class="log same1">
                <div class="logImage same2">
                    <img src="/images/login.png" alt="">
                </div>
                <div class="logtext1 same3" id="textlog">
                    <h2>Login: </h2>
                </div>
                <div class="close">
                    <ion-icon name="close-outline" id="loginclose"></ion-icon>
                </div>
                <div id="logdets">
                    <form action="" id="usernameform">
                        <ion-icon name="person-sharp"></ion-icon>
                        <input type="text" name="username" id="unameinput" placeholder="Username" autocomplete="off">
                    </form>
                    <form action="" id="passwordform">
                        <i class="ri-lock-2-fill"></i>
                        <input type="password" name="password" class="password" placeholder="Password"
                            autocomplete="off" id="password">
                        <div class="eye">
                            <ion-icon name="eye-off-outline" class="eye-hide"></ion-icon>
                            <ion-icon name="eye-outline" class="eye-show hide"></ion-icon>
                        </div>
                    </form>
                </div>
                <button id="loginButton" name="loginButton">LOGIN</button>
                <a id="newUser" style="cursor: pointer;">New Organisation?</a>
            </div>
        </div>
        <div class="regScreen same">
            <div class="reg same1">
                <div class="regImage same2">
                    <img src="/images/undrawagreementre.png" alt="">
                </div>
                <div class="text1">
                    <h2>Enter your basic details: </h2>
                </div>
                <div class="close">
                    <ion-icon name="close-outline" id="regclose"></ion-icon>
                </div>
                <div id="details">
                    <form action="" id="regform">
                        <div id="name" class="form">
                            <ion-icon name="person-sharp"></ion-icon>
                            <input type="text" name="name" id="nameinput" placeholder="Name" autocomplete="off">
                        </div>
                        <div id="mail" class="form">
                            <ion-icon name="mail"></ion-icon>
                            <input type="text" name="email" id="emailinput" placeholder="Email" autocomplete="off">
                        </div>
                        <div id="address" class="form">
                            <ion-icon name="bicycle"></ion-icon>
                            <input type="text" name="address" id="addressinput" placeholder="Address"
                                autocomplete="off">
                        </div>
                        <div id="city" class="form">
                            <i class="ri-community-fill"></i>
                            <input type="text" name="city" id="cityinput" placeholder="City" autocomplete="off">
                        </div>
                        <div id="state" class="form">
                            <ion-icon name="navigate-circle-outline"></ion-icon>
                            <input type="text" name="state" id="stateinput" placeholder="State" autocomplete="off">
                        </div>
                        <div id="location" class="form">
                            <ion-icon name="location"></ion-icon>
                            <input type="text" name="pincode" id="pincodeinput" placeholder="Pincode"
                                autocomplete="off">
                        </div>
                        <div id="password-div">
                            <i class="ri-lock-2-fill"></i>
                            <input type="password" name="password" class="password" placeholder="Password"
                                autocomplete="off" id="passwordinput">
                            <div class="eye">
                                <ion-icon name="eye-off-outline" class="eye-hide"></ion-icon>
                                <ion-icon name="eye-outline" class="eye-show hide"></ion-icon>
                            </div>
                        </div>
                    </form>
                </div>
                <div id="signupbtn"></div>
            </div>
        </div>
        <div id="notifs">
            <div id="filter">
                <label for="wet">
                    <div class="wet-input inputs">
                        <input type="radio" id="wet" name="wetordry" value="Wet" required>
                        <h3>Wet</h3>
                    </div>
                </label>
                <label for="dry">
                    <div class="dry-input inputs">
                        <input type="radio" id="dry" name="wetordry" value="Dry" required>
                        <h3>Dry</h3>
                    </div>
                </label>
                <label for="raw">
                    <div class="raw-input inputs">
                        <input type="radio" id="raw" name="rc" value="Raw" required>
                        <h3>Raw</h3>
                    </div>
                </label>
                <label for="cooked">
                    <div class="cooked-input inputs">
                        <input type="radio" id="cooked" name="rc" value="Cooked" required>
                        <h3>Cooked</h3>
                    </div>
                </label>
                <label for="eatable">
                    <div class="eatable-input inputs">
                        <input type="radio" id="eatable" name="er" value="Eatable" required>
                        <h3>Eatable</h3>
                    </div>
                </label>
                <label for="rotten">
                    <div class="rotten-input inputs">
                        <input type="radio" id="rotten" name="er" value="Rotten" required>
                        <h3>Rotten</h3>
                    </div>
                </label>
                <label for="veg">
                    <div class="veg-input inputs">
                        <input type="radio" id="veg" name="vn" value="Veg" required>
                        <h3>Vegetarian</h3>
                    </div>
                </label>
                <label for="non-veg">
                    <div class="nv-input inputs">
                        <input type="radio" name="vn" id="non-veg" value="Non-veg" required>
                        <h3>Non-vegetarian</h3>
                    </div>
                </label>
            </div>
            <% for(let i of data) {%>
                <div class="initial-state" id="notif-<%=i%>">
                    <div class="ce-button">
                        <ion-icon name="chevron-down-outline"></ion-icon>
                    </div>
                    <div class="user-name user-dets">
                        <h3>Name</h3>
                        <h2>Shivang</h2>
                    </div>
                    <div class="qty-desc">
                        <div class="item-qty user-dets">
                            <h3>Quantity (In kgs)</h3>
                            <h2>
                                <%= i.quantity %>
                            </h2>
                        </div>
                        <div class="item-desc user-dets">
                            <h3>Description</h3>
                            <h5>
                                <%= i.description %>
                            </h5>
                        </div>
                    </div>
                    <div class="city-name user-dets">
                        <h3>Pincode</h3>
                        <h2>482009</h2>
                    </div>
                    <div class="food-catg">
                        <div class="catg-icon" id="catg-icon1">
                            <% if (i.wetOrDry==='Wet' ) { %>
                                <img src="/icons/humidity.png" alt="Wet icon">
                                <h4>Wet</h4>
                                <% } else { %>
                                    <img src="/icons/dry.png" alt="Dry icon">
                                    <h4>Dry</h4>
                                    <% } %>
                        </div>
                        <div class="catg-icon" id="catg-icon2">
                            <% if (i.rawOrCooked==='Raw' ) { %>
                                <img src="/icons/raw.png" alt="Raw icon">
                                <h4>Raw</h4>
                                <% } else { %>
                                    <img src="/icons/cooked.png" alt="Cooked icon">
                                    <h4>Cooked</h4>
                                    <% } %>
                        </div>
                        <div class="catg-icon" id="catg-icon3">
                            <% if (i.er==='Eatable' ) { %>
                                <img src="/icons/eatable.jpeg" alt="Eatable icon">
                                <h4>Eatable</h4>
                                <% } else { %>
                                    <img src="/icons/rotten.png" alt="Rotten icon">
                                    <h4>Rotten</h4>
                                    <% } %>
                        </div>
                        <div class="catg-icon" id="catg-icon4">
                            <% if (i.vn==='Veg' ) { %>
                                <img src="/icons/veg-icon.svg" alt="Veg icon">
                                <h4>Veg</h4>
                                <% } else { %>
                                    <img src="/icons/non-veg-icon.svg" alt="Non veg icon">
                                    <h4>Non-veg</h4>
                                    <% } %>
                        </div>
                    </div>
                </div>
                <!-- <td>
                            <%= // i.description %>
                        </td> -->
                <% } %>
        </div>
        <div id="our-mission">
            <h2>OUR MISSION</h2>

            <div id="m-details">
                <div id="m-img">
                    <video src="/AlmsdeedfinalSegment.mp4" unmuted controls></video>
                </div>
                <div id="m-content">
                    <div id="hs" class="m-text">
                        <div class="ico" id="um">
                            <img src="/images/umbrella.png" alt="">
                        </div>
                        <div class="hs-text mt">
                            <h3>Help & Support</h3>
                            <h5>1.3 billion tonnes of food can be utilized every year that goes to waste.</h5>
                        </div>
                    </div>
                    <div id="sfw" class="m-text">
                        <div class="ico">
                            <img src="/images/hunger.png" alt="">
                        </div>
                        <div class="sfw-text mt">
                            <h3>Starve Free World</h3>
                            <h5>Limiting food waste globally could reduce the need to raise more food by 60%.</h5>
                        </div>
                    </div>
                    <div id="hh" class="m-text">
                        <div class="ico">
                            <img src="/images/helping-hand.png" alt="">
                        </div>
                        <div class="hh-text mt">
                            <h3>Helping Environment</h3>
                            <h5>The disposal of food loss and waste in landfills, leads to greenhouse gas emissions,
                                contributing to climate change.</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="./script.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-auth.js";
        import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyBq9ocRNammXkd9jLhrk8dxZ6Fq9xA4Am0",
            authDomain: "alms--deed.firebaseapp.com",
            projectId: "alms--deed",
            storageBucket: "alms--deed.appspot.com",
            messagingSenderId: "122388347636",
            appId: "1:122388347636:web:289c919e588e2b1f35fca1",
            measurementId: "G-C17B87WNH2"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);


        loginButton.addEventListener('click', (e) => {
            var email = document.getElementById('unameinput').value;
            var password = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    var lgDate = new Date();
                    update(ref(database, 'org/' + user.uid), {
                        last_login: lgDate,
                    })
                        .then((res) => {
                            // Data saved successfully!
                            //alert('User successfully loged In');
                            document.getElementById("usernameform").reset();
                            document.getElementById("passwordform").reset();
                            //window.location = '/';
                            document.querySelector('.logScreen').style.display = 'none';
                            document.querySelector("#logSign").innerHTML = "<h3>LOGOUT<h3>";

                            //  document.querySelector("#logSign").name="LOGOUT";
                            // document.getElementById("logSign").id = "newid";


                        })
                        .catch((error) => {
                            // The write failed...
                            alert(error);
                            window.location = "/";

                        });
                    // ...
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert(errorMessage);
                });
        });
        signupbtn.addEventListener('click', (e) => {

            var email = document.getElementById('emailinput').value;
            var password = document.getElementById('passwordinput').value;
            // var name = document.getElementById('nameinput');
            // var city = document.getElementById('cityinput').value;
            // var state = document.getElementById('stateinput').value;
            // var adress = document.getElementById('adressinput').value;


            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    set(ref(database, 'org/' + user.uid), {
                        password: password,
                        email: email
                        // adress:adress,
                        // name:name.value,
                        // city:city,
                        // state:state
                    })
                        .then((res) => {
                            // Data saved successfully!
                            //  alert('User successfully signed In');
                            document.getElementById("regform").reset();
                            document.querySelector("#logSign").innerHTML = "<h3>LOGOUT<h3>";
                            document.querySelector('.regScreen').style.display = 'none';

                            // document.getElementById("logSign").id = "newid";
                            //

                        })
                        .catch((error) => {
                            // The write failed...
                            alert(error);

                        });

                    // ...
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert(error);

                    // ..
                });
            const logout = document.getElementsByName("LOGOUT");
            logout.addEventListener('click', (e) => {
                document.getElementById("logSign").innerHTML = "LOGIN/SIGNUP";
            });

            // newid.addEventListener('click', (e) => {

            // // document.getElementById("newid").id = "logSign";
            //      document.querySelector("#newid").innerHTML = "LOGIN/SIGNUP"
            //     // // signOut(auth).then(() => {
            //     // //     alert("Sign out successfully");
            //     // // }).catch((error) => {
            //     // //     alert("Something bad happen in sign out");
            //     // // });

            // });

            // signOut(auth).then(() => {
            //     alert("Sign out successfully");
            // }).catch((error) => {
            //     alert("Something bad happen in sign out");
            // });
        });
    </script>
</body>

</html>